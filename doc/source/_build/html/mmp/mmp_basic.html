<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MMP Basic &mdash; A Programmer Prepares 0.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="MMP Configuration" href="mmp_config.html" />
    <link rel="prev" title="MMP" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> A Programmer Prepares
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">论程序员的自我修养</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interview.html">程序员面试要点</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resume.html">Resume</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithm/index.html">Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture/index.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/index.html">Programming Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/index.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oss/index.html">Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../math/index.html">mathematics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../math/index.html#overview">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../math/index.html#least-squares-method">最小二乘法 least squares method</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pattern/index.html">Pattern</a></li>
<li class="toctree-l1"><a class="reference internal" href="../platform/index.html">Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tool/index.html">Tools</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">MMP</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">MMP Basic</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#build">Build</a></li>
<li class="toctree-l3"><a class="reference internal" href="#start-and-stop">Start and stop</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration">configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#glossary">Glossary</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mcs">MCS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cmediaserver">CMediaServer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pdu">PDU</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#joinsession-pdu">JoinSession PDU</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#typical-flow">Typical flow</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mmp_config.html">MMP Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="mmp_endpoint.html">Session Endpoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="mmp_main.html">MMP Main Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="mmp_pdu.html">MCS PDU</a></li>
<li class="toctree-l2"><a class="reference internal" href="mmp_turn.html">MMP TURN Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="mmp_rtp.html">MMP RTP</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../thinclient/index.html">Thin Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utiltp/index.html">UTILTP</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">A Programmer Prepares</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">MMP</a> &raquo;</li>
      <li>MMP Basic</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/mmp/mmp_basic.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="mmp-basic">
<h1>MMP Basic<a class="headerlink" href="#mmp-basic" title="Permalink to this headline"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#build" id="id1">Build</a></p></li>
<li><p><a class="reference internal" href="#start-and-stop" id="id2">Start and stop</a></p></li>
<li><p><a class="reference internal" href="#configuration" id="id3">configuration</a></p></li>
<li><p><a class="reference internal" href="#glossary" id="id4">Glossary</a></p></li>
<li><p><a class="reference internal" href="#mcs" id="id5">MCS</a></p>
<ul>
<li><p><a class="reference internal" href="#cmediaserver" id="id6">CMediaServer</a></p>
<ul>
<li><p><a class="reference internal" href="#parent-classes" id="id7">parent classes</a></p></li>
<li><p><a class="reference internal" href="#member-classes" id="id8">member classes</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#pdu" id="id9">PDU</a></p>
<ul>
<li><p><a class="reference internal" href="#joinsession-pdu" id="id10">JoinSession PDU</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#typical-flow" id="id11">Typical flow</a></p></li>
</ul>
</div>
<section id="build">
<h2><a class="toc-backref" href="#id1">Build</a><a class="headerlink" href="#build" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone git clone ssh://git@bitbucket-eng-chn-sjc1.cisco.com:7999/cctgfork/webex-mmp
git clone git clone ssh://git@bitbucket-eng-chn-sjc1.cisco.com:7999/cctgfork/webex-pangu
<span class="nb">cd</span> webex-mmp/dependencies
<span class="nb">source</span> getwdm_dep.sh
<span class="nb">cd</span> ../src <span class="o">&amp;&amp;</span> make
<span class="nb">cd</span> ../test <span class="o">&amp;&amp;</span> make  // compile and run unit <span class="nb">test</span>
</pre></div>
</div>
</section>
<section id="start-and-stop">
<h2><a class="toc-backref" href="#id2">Start and stop</a><a class="headerlink" href="#start-and-stop" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>start</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/etc/webex/init.d/mmp start

g_GroupOwner=&quot;wrt-mmp:nobody&quot;
g_CorePath=&#39;/opt/webex/core&#39;
g_ErrorFile=&#39;/tmp/cmc.output&#39;
l_Index=1
l_ProcNum=0
l_ProcessName=&quot;wbxmcs-0$l_Index&quot;
l_WorkPath=${WEBEX_MMP_HOME:-/opt/webex/mmp}
l_FullProcessName=&quot;${l_WorkPath}/bin/${l_ProcessName}&quot;
source /opt/webex/mmp/bin/runenv.sh &gt;/dev/null 2&gt;&amp;1
nohup ${l_FullProcessName} -f &quot;webex-${l_Index}.cfg&quot; &gt;/dev/null 2&gt;&gt;${g_ErrorFile} &amp;
</pre></div>
</div>
<ul class="simple">
<li><p>stop</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">[</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">webex</span><span class="o">/</span><span class="n">init</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">mmp</span> <span class="p">];</span>
    <span class="n">then</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">webex</span><span class="o">/</span><span class="n">init</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">mmp</span> <span class="n">stop</span><span class="p">;</span>
<span class="k">else</span>
    <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">webex</span><span class="o">/</span><span class="n">init</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">wbxd</span> <span class="n">stop</span><span class="p">;</span>
<span class="n">fi</span>
</pre></div>
</div>
<ul class="simple">
<li><p>check</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">webex</span><span class="o">/</span><span class="n">init</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">mmp</span> <span class="n">status</span>
</pre></div>
</div>
</section>
<section id="configuration">
<h2><a class="toc-backref" href="#id3">configuration</a><a class="headerlink" href="#configuration" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>webex.cfg</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@gmhz61mcs101</span> <span class="n">logs</span><span class="p">]</span><span class="c1"># netstat -anp|grep mcs</span>
<span class="n">tcp</span>        <span class="mi">0</span>      <span class="mi">0</span> <span class="mf">10.224.184.103</span><span class="p">:</span><span class="mi">5004</span>     <span class="mf">0.0.0.0</span><span class="p">:</span><span class="o">*</span>               <span class="n">LISTEN</span>      <span class="mi">9206</span><span class="o">/</span><span class="n">wbxmcs</span><span class="o">-</span><span class="mi">01</span>
<span class="n">tcp</span>        <span class="mi">0</span>      <span class="mi">0</span> <span class="mf">10.224.184.103</span><span class="p">:</span><span class="mi">80</span>       <span class="mf">0.0.0.0</span><span class="p">:</span><span class="o">*</span>               <span class="n">LISTEN</span>      <span class="mi">9206</span><span class="o">/</span><span class="n">wbxmcs</span><span class="o">-</span><span class="mi">01</span>
<span class="n">tcp</span>        <span class="mi">0</span>      <span class="mi">0</span> <span class="mf">10.224.184.103</span><span class="p">:</span><span class="mi">8081</span>     <span class="mf">0.0.0.0</span><span class="p">:</span><span class="o">*</span>               <span class="n">LISTEN</span>      <span class="mi">9206</span><span class="o">/</span><span class="n">wbxmcs</span><span class="o">-</span><span class="mi">01</span>
<span class="n">tcp</span>        <span class="mi">0</span>      <span class="mi">0</span> <span class="mf">10.224.184.103</span><span class="p">:</span><span class="mi">5062</span>     <span class="mf">0.0.0.0</span><span class="p">:</span><span class="o">*</span>               <span class="n">LISTEN</span>      <span class="mi">9206</span><span class="o">/</span><span class="n">wbxmcs</span><span class="o">-</span><span class="mi">01</span>
<span class="n">tcp</span>        <span class="mi">0</span>      <span class="mi">0</span> <span class="mf">10.224.184.103</span><span class="p">:</span><span class="mi">8554</span>     <span class="mf">0.0.0.0</span><span class="p">:</span><span class="o">*</span>               <span class="n">LISTEN</span>      <span class="mi">9206</span><span class="o">/</span><span class="n">wbxmcs</span><span class="o">-</span><span class="mi">01</span>
<span class="n">tcp</span>        <span class="mi">0</span>      <span class="mi">1</span> <span class="mf">10.224.184.103</span><span class="p">:</span><span class="mi">36590</span>    <span class="mf">10.224.188.71</span><span class="p">:</span><span class="mi">1521</span>      <span class="n">SYN_SENT</span>    <span class="mi">9206</span><span class="o">/</span><span class="n">wbxmcs</span><span class="o">-</span><span class="mi">01</span>
<span class="n">tcp</span>        <span class="mi">0</span>      <span class="mi">0</span> <span class="mf">10.224.184.103</span><span class="p">:</span><span class="mi">56118</span>    <span class="mf">10.224.189.107</span><span class="p">:</span><span class="mi">12342</span>    <span class="n">ESTABLISHED</span> <span class="mi">9206</span><span class="o">/</span><span class="n">wbxmcs</span><span class="o">-</span><span class="mi">01</span>
<span class="n">udp</span>        <span class="mi">0</span>      <span class="mi">0</span> <span class="mf">10.224.184.103</span><span class="p">:</span><span class="mi">7071</span>     <span class="mf">0.0.0.0</span><span class="p">:</span><span class="o">*</span>                           <span class="mi">9206</span><span class="o">/</span><span class="n">wbxmcs</span><span class="o">-</span><span class="mi">01</span>
<span class="n">udp</span>        <span class="mi">0</span>      <span class="mi">0</span> <span class="mf">10.224.184.103</span><span class="p">:</span><span class="mi">39999</span>    <span class="mf">0.0.0.0</span><span class="p">:</span><span class="o">*</span>                           <span class="mi">9206</span><span class="o">/</span><span class="n">wbxmcs</span><span class="o">-</span><span class="mi">01</span>
<span class="n">udp</span>        <span class="mi">0</span>      <span class="mi">0</span> <span class="mf">10.224.184.103</span><span class="p">:</span><span class="mi">7500</span>     <span class="mf">0.0.0.0</span><span class="p">:</span><span class="o">*</span>                           <span class="mi">9206</span><span class="o">/</span><span class="n">wbxmcs</span><span class="o">-</span><span class="mi">01</span>
<span class="n">udp</span>        <span class="mi">0</span>      <span class="mi">0</span> <span class="mf">10.224.184.103</span><span class="p">:</span><span class="mi">7501</span>     <span class="mf">0.0.0.0</span><span class="p">:</span><span class="o">*</span>                           <span class="mi">9206</span><span class="o">/</span><span class="n">wbxmcs</span><span class="o">-</span><span class="mi">01</span>
<span class="n">udp</span>        <span class="mi">0</span>      <span class="mi">0</span> <span class="mf">10.224.184.103</span><span class="p">:</span><span class="mi">9000</span>     <span class="mf">0.0.0.0</span><span class="p">:</span><span class="o">*</span>                           <span class="mi">9206</span><span class="o">/</span><span class="n">wbxmcs</span><span class="o">-</span><span class="mi">01</span>
<span class="n">udp</span>        <span class="mi">0</span>      <span class="mi">0</span> <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">34497</span>           <span class="mf">0.0.0.0</span><span class="p">:</span><span class="o">*</span>                           <span class="mi">9206</span><span class="o">/</span><span class="n">wbxmcs</span><span class="o">-</span><span class="mi">01</span>
<span class="n">udp</span>        <span class="mi">0</span>      <span class="mi">0</span> <span class="mf">10.224.184.103</span><span class="p">:</span><span class="mi">5060</span>     <span class="mf">0.0.0.0</span><span class="p">:</span><span class="o">*</span>                           <span class="mi">9206</span><span class="o">/</span><span class="n">wbxmcs</span><span class="o">-</span><span class="mi">01</span>
<span class="n">raw</span>   <span class="mi">113152</span>      <span class="mi">0</span> <span class="mf">10.224.184.103</span><span class="p">:</span><span class="mi">17</span>       <span class="mf">0.0.0.0</span><span class="p">:</span><span class="o">*</span>               <span class="mi">7</span>           <span class="mi">9206</span><span class="o">/</span><span class="n">wbxmcs</span><span class="o">-</span><span class="mi">01</span>
<span class="n">raw</span>   <span class="mi">113152</span>      <span class="mi">0</span> <span class="mf">10.224.184.103</span><span class="p">:</span><span class="mi">17</span>       <span class="mf">0.0.0.0</span><span class="p">:</span><span class="o">*</span>               <span class="mi">7</span>           <span class="mi">9206</span><span class="o">/</span><span class="n">wbxmcs</span><span class="o">-</span><span class="mi">01</span>
<span class="n">unix</span>  <span class="mi">3</span>      <span class="p">[</span> <span class="p">]</span>         <span class="n">STREAM</span>     <span class="n">CONNECTED</span>     <span class="mi">34551948</span> <span class="mi">9206</span><span class="o">/</span><span class="n">wbxmcs</span><span class="o">-</span><span class="mi">01</span>
<span class="n">unix</span>  <span class="mi">3</span>      <span class="p">[</span> <span class="p">]</span>         <span class="n">STREAM</span>     <span class="n">CONNECTED</span>     <span class="mi">34551949</span> <span class="mi">9206</span><span class="o">/</span><span class="n">wbxmcs</span><span class="o">-</span><span class="mi">01</span>
<span class="n">unix</span>  <span class="mi">3</span>      <span class="p">[</span> <span class="p">]</span>         <span class="n">STREAM</span>     <span class="n">CONNECTED</span>     <span class="mi">34551715</span> <span class="mi">9206</span><span class="o">/</span><span class="n">wbxmcs</span><span class="o">-</span><span class="mi">01</span>
<span class="n">unix</span>  <span class="mi">3</span>      <span class="p">[</span> <span class="p">]</span>         <span class="n">STREAM</span>     <span class="n">CONNECTED</span>     <span class="mi">34551716</span> <span class="mi">9206</span><span class="o">/</span><span class="n">wbxmcs</span><span class="o">-</span><span class="mi">01</span>
</pre></div>
</div>
</section>
<section id="glossary">
<h2><a class="toc-backref" href="#id4">Glossary</a><a class="headerlink" href="#glossary" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>AGC: Automatic Gain Control</p></li>
<li><p>VAD: Voice Activity Detection</p></li>
<li><p>AEC: Acoustic Echo Cancellation</p></li>
<li><p>PLC: Packet Lost Cancellation</p></li>
<li><p>NR: Noise Reduction</p></li>
<li><p>FEC: Forward Error Correction</p></li>
</ul>
</section>
<section id="mcs">
<h2><a class="toc-backref" href="#id5">MCS</a><a class="headerlink" href="#mcs" title="Permalink to this headline"></a></h2>
<section id="cmediaserver">
<h3><a class="toc-backref" href="#id6">CMediaServer</a><a class="headerlink" href="#cmediaserver" title="Permalink to this headline"></a></h3>
<p>CRC(classes, responsibilities, and collaborations )</p>
<section id="parent-classes">
<h4><a class="toc-backref" href="#id7">parent classes</a><a class="headerlink" href="#parent-classes" title="Permalink to this headline"></a></h4>
<p>public IMmServerSessionJoinSink,
public IMmRestfulAPIReceivedSink,
public ISvrProxyMgrSink,
#ifndef __STREAMING_SERVER__
public IRtspServerSink,
#endif
#ifdef _MM_DB_ // 12/19/05,get DB log error
public IDBLogInterfaceSink,
#endif
public CCmTimerWrapperIDSink,
public IServerLoadNotifySink,
public CHttpServiceSink,
public CHttpServiceLogSink,
public ICmObserver,
public IAppSessionSink</p>
</section>
<section id="member-classes">
<h4><a class="toc-backref" href="#id8">member classes</a><a class="headerlink" href="#member-classes" title="Permalink to this headline"></a></h4>
<ul class="simple">
<li><p>IRtspServer</p></li>
<li><p>CMmServerSessionAPI</p></li>
</ul>
</section>
</section>
</section>
<section id="pdu">
<h2><a class="toc-backref" href="#id9">PDU</a><a class="headerlink" href="#pdu" title="Permalink to this headline"></a></h2>
<section id="joinsession-pdu">
<h3><a class="toc-backref" href="#id10">JoinSession PDU</a><a class="headerlink" href="#joinsession-pdu" title="Permalink to this headline"></a></h3>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">CMmSessionJoinPDURequest</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">CMmSessionPDUBase</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="k">public</span><span class="o">:</span><span class="w"></span>
<span class="w">    </span><span class="n">CMmSessionJoinPDURequest</span><span class="p">()</span><span class="w"></span>
<span class="w">        </span><span class="o">:</span><span class="w"> </span><span class="n">m_lpTicket</span><span class="p">(</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">,</span><span class="w"> </span><span class="n">m_wTicketLen</span><span class="p">(</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">,</span><span class="w"> </span><span class="n">m_lpUserInfo</span><span class="p">(</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">,</span><span class="w"> </span><span class="n">m_wUserInfoLen</span><span class="p">(</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">,</span><span class="w"> </span><span class="n">m_cEncryptType</span><span class="p">(</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">,</span><span class="w"> </span><span class="n">m_cSessionType</span><span class="p">(</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">,</span><span class="w"> </span><span class="n">m_wSequence</span><span class="p">(</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">,</span><span class="w"> </span><span class="n">m_bHaveUserInfo</span><span class="p">(</span><span class="w"> </span><span class="n">TRUE</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">,</span><span class="w"> </span><span class="n">m_dwSeqOfCreate</span><span class="p">(</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">m_cType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MM_SESSION_PDU_TYPE_JOIN_SESSION_RQST</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="k">private</span><span class="o">:</span><span class="w"></span>

<span class="w">    </span><span class="n">BYTE</span><span class="o">*</span><span class="w">                                                   </span><span class="n">m_lpTicket</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">WORD</span><span class="w">                                                    </span><span class="n">m_wTicketLen</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">BYTE</span><span class="o">*</span><span class="w">                                                   </span><span class="n">m_lpUserInfo</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">WORD</span><span class="w">                                                    </span><span class="n">m_wUserInfoLen</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">MM_SESSION_ENCRYPTION_TYPE</span><span class="w">              </span><span class="n">m_cEncryptType</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">MM_SESSION_TYPE</span><span class="w">                                 </span><span class="n">m_cSessionType</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">WORD</span><span class="w">                                                    </span><span class="n">m_wSequence</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">BOOL</span><span class="w">                                                    </span><span class="n">m_bHaveUserInfo</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">DWORD</span><span class="w">                                                   </span><span class="n">m_dwSeqOfCreate</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">CCmString</span><span class="w">                                               </span><span class="n">m_strTicket</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">CCmString</span><span class="w">                                               </span><span class="n">m_strUserInfo</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
<section id="typical-flow">
<h2><a class="toc-backref" href="#id11">Typical flow</a><a class="headerlink" href="#typical-flow" title="Permalink to this headline"></a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">mResult</span><span class="w"> </span><span class="n">CMmSessionServerEndPoint</span><span class="o">::</span><span class="w"></span>
<span class="n">OnSessionJoin_u</span><span class="p">(</span><span class="n">CCmMessageBlock</span><span class="w"> </span><span class="o">&amp;</span><span class="n">aData</span><span class="p">,</span><span class="w"> </span><span class="n">BYTE</span><span class="w"> </span><span class="n">aPduType</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="n">PAUTHTICKETFORMAT</span><span class="w"> </span><span class="n">pFormat</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">PAUTHTICKETATTRIB</span><span class="w"> </span><span class="n">pAttrib</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">CM_INFO_TRACE</span><span class="p">(</span><span class="s">&quot;CMmSessionServerEndPoint::OnSessionJoin_u. &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"></span>
<span class="w">        </span><span class="n">Param</span><span class="p">(</span><span class="n">aPduType</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">Sep</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">EndpointPtr</span><span class="p">(</span><span class="k">this</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">CM_ASSERTE</span><span class="p">(</span><span class="n">CCmThreadManager</span><span class="o">::</span><span class="n">IsEqualCurrentThread</span><span class="p">(</span><span class="w"></span>
<span class="w">        </span><span class="n">m_pSessionManager</span><span class="o">-&gt;</span><span class="n">GetUserThread</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetThreadId</span><span class="p">()));</span><span class="w"></span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">aPduType</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">MM_SESSION_PDU_TYPE_JOIN_SESSION_RQST</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">m_clientVer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MM_CLIENT_T21</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">m_joinInfoExt</span><span class="p">.</span><span class="n">m_clientVersion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MM_CLIENT_T21</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">m_joinInfoExt</span><span class="p">.</span><span class="n">m_requiredVersion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MM_SERVER_VERSION_3_4_1_0</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">CMmSessionJoinPDURequest</span><span class="w"> </span><span class="n">pduRequest</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">ProcJoinSessionRequest</span><span class="p">(</span><span class="n">aData</span><span class="p">,</span><span class="w">  </span><span class="n">pduRequest</span><span class="p">,</span><span class="w"> </span><span class="n">pFormat</span><span class="p">,</span><span class="w"> </span><span class="n">pAttrib</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="MMP" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="mmp_config.html" class="btn btn-neutral float-right" title="MMP Configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Walter Fan.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>